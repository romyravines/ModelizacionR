<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7.6 Práctica en R | Modelización en R</title>
  <meta name="description" content="Manual básico para profesionales que utilizan analítica avanzada." />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="7.6 Práctica en R | Modelización en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Manual básico para profesionales que utilizan analítica avanzada." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7.6 Práctica en R | Modelización en R" />
  
  <meta name="twitter:description" content="Manual básico para profesionales que utilizan analítica avanzada." />
  

<meta name="author" content="Romy Rodríguez-Ravines" />


<meta name="date" content="2019-01-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="funciones-de-transferencia.html">
<link rel="next" href="a-manera-de-nota-final.html">
<script src="assets/jquery-2.2.3/jquery.min.js"></script>
<link href="assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="assets/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="assets/proj4js-2.3.15/proj4.js"></script>
<link href="assets/highcharts-7.0.1/css/motion.css" rel="stylesheet" />
<link href="assets/highcharts-7.0.1/css/htmlwdgtgrid.css" rel="stylesheet" />
<script src="assets/highcharts-7.0.1/highcharts.js"></script>
<script src="assets/highcharts-7.0.1/highcharts-3d.js"></script>
<script src="assets/highcharts-7.0.1/highcharts-more.js"></script>
<script src="assets/highcharts-7.0.1/modules/stock.js"></script>
<script src="assets/highcharts-7.0.1/modules/map.js"></script>
<script src="assets/highcharts-7.0.1/modules/annotations.js"></script>
<script src="assets/highcharts-7.0.1/modules/boost.js"></script>
<script src="assets/highcharts-7.0.1/modules/data.js"></script>
<script src="assets/highcharts-7.0.1/modules/drag-panes.js"></script>
<script src="assets/highcharts-7.0.1/modules/drilldown.js"></script>
<script src="assets/highcharts-7.0.1/modules/item-series.js"></script>
<script src="assets/highcharts-7.0.1/modules/offline-exporting.js"></script>
<script src="assets/highcharts-7.0.1/modules/overlapping-datalabels.js"></script>
<script src="assets/highcharts-7.0.1/modules/exporting.js"></script>
<script src="assets/highcharts-7.0.1/modules/export-data.js"></script>
<script src="assets/highcharts-7.0.1/modules/funnel.js"></script>
<script src="assets/highcharts-7.0.1/modules/heatmap.js"></script>
<script src="assets/highcharts-7.0.1/modules/treemap.js"></script>
<script src="assets/highcharts-7.0.1/modules/sankey.js"></script>
<script src="assets/highcharts-7.0.1/modules/solid-gauge.js"></script>
<script src="assets/highcharts-7.0.1/modules/streamgraph.js"></script>
<script src="assets/highcharts-7.0.1/modules/sunburst.js"></script>
<script src="assets/highcharts-7.0.1/modules/vector.js"></script>
<script src="assets/highcharts-7.0.1/modules/wordcloud.js"></script>
<script src="assets/highcharts-7.0.1/modules/xrange.js"></script>
<script src="assets/highcharts-7.0.1/modules/tilemap.js"></script>
<script src="assets/highcharts-7.0.1/modules/venn.js"></script>
<script src="assets/highcharts-7.0.1/modules/gantt.js"></script>
<script src="assets/highcharts-7.0.1/modules/timeline.js"></script>
<script src="assets/highcharts-7.0.1/modules/parallel-coordinates.js"></script>
<script src="assets/highcharts-7.0.1/plugins/grouped-categories.js"></script>
<script src="assets/highcharts-7.0.1/plugins/motion.js"></script>
<script src="assets/highcharts-7.0.1/plugins/multicolor_series.js"></script>
<script src="assets/highcharts-7.0.1/custom/reset.js"></script>
<script src="assets/highcharts-7.0.1/custom/symbols-extra.js"></script>
<script src="assets/highcharts-7.0.1/custom/text-symbols.js"></script>
<script src="assets/highchart-binding-0.7.0/highchart.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Presentación</a></li>
<li class="part"><span><b>I MODELOS ANALÍTICOS</b></span></li>
<li class="chapter" data-level="1" data-path="modelizacion.html"><a href="modelizacion.html"><i class="fa fa-check"></i><b>1</b> Modelizar</a><ul>
<li class="chapter" data-level="1.1" data-path="modelizar.html"><a href="modelizar.html"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es Modelizar?</a></li>
<li class="chapter" data-level="1.2" data-path="que-es-un-modelo-analitico.html"><a href="que-es-un-modelo-analitico.html"><i class="fa fa-check"></i><b>1.2</b> ¿Qué es un modelo analítico?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipos-de-problemas.html"><a href="tipos-de-problemas.html"><i class="fa fa-check"></i><b>2</b> Tipos de Problemas</a><ul>
<li class="chapter" data-level="2.1" data-path="clasemodelos.html"><a href="clasemodelos.html"><i class="fa fa-check"></i><b>2.1</b> Enfoques de Modelización</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="catalogo-de-tecnicas.html"><a href="catalogo-de-tecnicas.html"><i class="fa fa-check"></i><b>3</b> Catálogo de Técnicas</a><ul>
<li class="chapter" data-level="3.1" data-path="tecnicas-de-clustering.html"><a href="tecnicas-de-clustering.html"><i class="fa fa-check"></i><b>3.1</b> Técnicas de <em>Clustering</em></a></li>
<li class="chapter" data-level="3.2" data-path="tecnicas-de-clasificacion.html"><a href="tecnicas-de-clasificacion.html"><i class="fa fa-check"></i><b>3.2</b> Técnicas de Clasificación</a></li>
<li class="chapter" data-level="3.3" data-path="tecnicas-de-regresion.html"><a href="tecnicas-de-regresion.html"><i class="fa fa-check"></i><b>3.3</b> Técnicas de Regresión</a></li>
<li class="chapter" data-level="3.4" data-path="tecnicas-de-reduccion-de-dimension.html"><a href="tecnicas-de-reduccion-de-dimension.html"><i class="fa fa-check"></i><b>3.4</b> Técnicas de Reducción de Dimensión</a></li>
<li class="chapter" data-level="3.5" data-path="otras-tecnicas.html"><a href="otras-tecnicas.html"><i class="fa fa-check"></i><b>3.5</b> Otras ‘Técnicas’</a></li>
<li class="chapter" data-level="3.6" data-path="que-tecnica-utilizar.html"><a href="que-tecnica-utilizar.html"><i class="fa fa-check"></i><b>3.6</b> ¿Qué técnica utilizar?</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="evaluacion-de-modelos.html"><a href="evaluacion-de-modelos.html"><i class="fa fa-check"></i><b>4</b> Evaluación de modelos</a><ul>
<li class="chapter" data-level="4.1" data-path="diagnosis-de-negocio.html"><a href="diagnosis-de-negocio.html"><i class="fa fa-check"></i><b>4.1</b> Diagnosis de Negocio</a></li>
<li class="chapter" data-level="4.2" data-path="evaluacion-en-respuesta-binaria.html"><a href="evaluacion-en-respuesta-binaria.html"><i class="fa fa-check"></i><b>4.2</b> Evaluación en Respuesta Binaria</a><ul>
<li class="chapter" data-level="4.2.1" data-path="evaluacion-en-respuesta-binaria.html"><a href="evaluacion-en-respuesta-binaria.html#clasificacion"><i class="fa fa-check"></i><b>4.2.1</b> Clasificación</a></li>
<li class="chapter" data-level="4.2.2" data-path="evaluacion-en-respuesta-binaria.html"><a href="evaluacion-en-respuesta-binaria.html#medidas-de-desigualdad"><i class="fa fa-check"></i><b>4.2.2</b> Medidas de desigualdad</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="evaluacion-en-respuesta-continua.html"><a href="evaluacion-en-respuesta-continua.html"><i class="fa fa-check"></i><b>4.3</b> Evaluación en Respuesta Continúa</a><ul>
<li class="chapter" data-level="4.3.1" data-path="evaluacion-en-respuesta-continua.html"><a href="evaluacion-en-respuesta-continua.html#modelos-de-regresion"><i class="fa fa-check"></i><b>4.3.1</b> Modelos de Regresión</a></li>
<li class="chapter" data-level="4.3.2" data-path="evaluacion-en-respuesta-continua.html"><a href="evaluacion-en-respuesta-continua.html#modelos-de-series-temporales"><i class="fa fa-check"></i><b>4.3.2</b> Modelos de Series temporales</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="evaluacion-en-clustering.html"><a href="evaluacion-en-clustering.html"><i class="fa fa-check"></i><b>4.4</b> Evaluación en <em>Clustering</em></a><ul>
<li class="chapter" data-level="4.4.1" data-path="evaluacion-en-clustering.html"><a href="evaluacion-en-clustering.html#silueta"><i class="fa fa-check"></i><b>4.4.1</b> Silueta</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="metodos-de-re-muestreo.html"><a href="metodos-de-re-muestreo.html"><i class="fa fa-check"></i><b>4.5</b> Métodos de re-muestreo</a><ul>
<li class="chapter" data-level="4.5.1" data-path="metodos-de-re-muestreo.html"><a href="metodos-de-re-muestreo.html#training-testing"><i class="fa fa-check"></i><b>4.5.1</b> Training &amp; testing</a></li>
<li class="chapter" data-level="4.5.2" data-path="metodos-de-re-muestreo.html"><a href="metodos-de-re-muestreo.html#cross-validation"><i class="fa fa-check"></i><b>4.5.2</b> Cross validation</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="practica-en-r.html"><a href="practica-en-r.html"><i class="fa fa-check"></i><b>4.6</b> Práctica en R</a><ul>
<li class="chapter" data-level="4.6.1" data-path="practica-en-r.html"><a href="practica-en-r.html#preparacion-de-los-datos"><i class="fa fa-check"></i><b>4.6.1</b> Preparación de los datos</a></li>
<li class="chapter" data-level="4.6.2" data-path="practica-en-r.html"><a href="practica-en-r.html#clasificacion-1"><i class="fa fa-check"></i><b>4.6.2</b> Clasificación</a></li>
<li class="chapter" data-level="4.6.3" data-path="practica-en-r.html"><a href="practica-en-r.html#regresion"><i class="fa fa-check"></i><b>4.6.3</b> Regresión</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Modelos Estadísticos</b></span></li>
<li class="chapter" data-level="5" data-path="regresion-lineal.html"><a href="regresion-lineal.html"><i class="fa fa-check"></i><b>5</b> Regresión Lineal</a><ul>
<li class="chapter" data-level="5.1" data-path="que-es-un-modelo-de-regresion.html"><a href="que-es-un-modelo-de-regresion.html"><i class="fa fa-check"></i><b>5.1</b> ¿Qué es un Modelo de Regresión?</a><ul>
<li class="chapter" data-level="5.1.1" data-path="que-es-un-modelo-de-regresion.html"><a href="que-es-un-modelo-de-regresion.html#ver-tambien"><i class="fa fa-check"></i><b>5.1.1</b> Ver también:</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="practica-en-r-1.html"><a href="practica-en-r-1.html"><i class="fa fa-check"></i><b>5.2</b> Práctica en R</a><ul>
<li class="chapter" data-level="5.2.1" data-path="practica-en-r-1.html"><a href="practica-en-r-1.html#regresion-lineal-simple"><i class="fa fa-check"></i><b>5.2.1</b> Regresión lineal simple</a></li>
<li class="chapter" data-level="5.2.2" data-path="practica-en-r-1.html"><a href="practica-en-r-1.html#regresion-lineal-multiple"><i class="fa fa-check"></i><b>5.2.2</b> Regresión lineal múltiple</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="regresion-logistica.html"><a href="regresion-logistica.html"><i class="fa fa-check"></i><b>6</b> Regresión Logística</a><ul>
<li class="chapter" data-level="6.1" data-path="modelos-lineales-generalizados.html"><a href="modelos-lineales-generalizados.html"><i class="fa fa-check"></i><b>6.1</b> Modelos Lineales Generalizados</a></li>
<li class="chapter" data-level="6.2" data-path="modelo-logit.html"><a href="modelo-logit.html"><i class="fa fa-check"></i><b>6.2</b> Modelo Logit</a></li>
<li class="chapter" data-level="6.3" data-path="modelo-probit.html"><a href="modelo-probit.html"><i class="fa fa-check"></i><b>6.3</b> Modelo Probit</a></li>
<li class="chapter" data-level="6.4" data-path="practica-en-r-2.html"><a href="practica-en-r-2.html"><i class="fa fa-check"></i><b>6.4</b> Práctica en R</a><ul>
<li class="chapter" data-level="6.4.1" data-path="practica-en-r-2.html"><a href="practica-en-r-2.html#otros-ejemplos"><i class="fa fa-check"></i><b>6.4.1</b> Otros ejemplos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="series-temporales.html"><a href="series-temporales.html"><i class="fa fa-check"></i><b>7</b> Series Temporales</a><ul>
<li class="chapter" data-level="7.1" data-path="que-es-una-serie-temporal.html"><a href="que-es-una-serie-temporal.html"><i class="fa fa-check"></i><b>7.1</b> ¿Qué es una Serie Temporal?</a></li>
<li class="chapter" data-level="7.2" data-path="herramientas-de-analisis.html"><a href="herramientas-de-analisis.html"><i class="fa fa-check"></i><b>7.2</b> Herramientas de Análisis</a><ul>
<li class="chapter" data-level="7.2.1" data-path="herramientas-de-analisis.html"><a href="herramientas-de-analisis.html#autocorrelacion-acf-y-pacf"><i class="fa fa-check"></i><b>7.2.1</b> Autocorrelación (acf y pacf)</a></li>
<li class="chapter" data-level="7.2.2" data-path="herramientas-de-analisis.html"><a href="herramientas-de-analisis.html#operadores-del-tiempo"><i class="fa fa-check"></i><b>7.2.2</b> Operadores (del Tiempo)</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="alisado-exponencial.html"><a href="alisado-exponencial.html"><i class="fa fa-check"></i><b>7.3</b> Alisado Exponencial</a></li>
<li class="chapter" data-level="7.4" data-path="arima.html"><a href="arima.html"><i class="fa fa-check"></i><b>7.4</b> ARIMA</a><ul>
<li class="chapter" data-level="7.4.1" data-path="arima.html"><a href="arima.html#parte-ar-autorregresiva"><i class="fa fa-check"></i><b>7.4.1</b> Parte AR (Autorregresiva)</a></li>
<li class="chapter" data-level="7.4.2" data-path="arima.html"><a href="arima.html#parte-ma-medias-moviles"><i class="fa fa-check"></i><b>7.4.2</b> Parte MA (Medias Móviles)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="funciones-de-transferencia.html"><a href="funciones-de-transferencia.html"><i class="fa fa-check"></i><b>7.5</b> Funciones de Transferencia</a></li>
<li class="chapter" data-level="7.6" data-path="practica-en-r-3.html"><a href="practica-en-r-3.html"><i class="fa fa-check"></i><b>7.6</b> Práctica en R</a><ul>
<li class="chapter" data-level="7.6.1" data-path="practica-en-r-3.html"><a href="practica-en-r-3.html#ver-tambien-1"><i class="fa fa-check"></i><b>7.6.1</b> Ver también</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="a-manera-de-nota-final.html"><a href="a-manera-de-nota-final.html"><i class="fa fa-check"></i><b>7.7</b> A manera de nota final</a></li>
</ul></li>
<li class="part"><span><b>III Machine Learning</b></span></li>
<li class="chapter" data-level="8" data-path="introduccion.html"><a href="introduccion.html"><i class="fa fa-check"></i><b>8</b> Introducción</a><ul>
<li class="chapter" data-level="8.1" data-path="aprendizaje-supervisado.html"><a href="aprendizaje-supervisado.html"><i class="fa fa-check"></i><b>8.1</b> Aprendizaje supervisado</a><ul>
<li class="chapter" data-level="8.1.1" data-path="aprendizaje-supervisado.html"><a href="aprendizaje-supervisado.html#una-reflexion"><i class="fa fa-check"></i><b>8.1.1</b> Una reflexión</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="aprendizaje-no-supervisado.html"><a href="aprendizaje-no-supervisado.html"><i class="fa fa-check"></i><b>8.2</b> Aprendizaje no supervisado</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="aprendizaje-no-supervisado-1.html"><a href="aprendizaje-no-supervisado-1.html"><i class="fa fa-check"></i><b>9</b> Aprendizaje no supervisado</a><ul>
<li class="chapter" data-level="9.1" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html"><i class="fa fa-check"></i><b>9.1</b> K-medias (<em>k-means</em>)</a><ul>
<li class="chapter" data-level="9.1.1" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#el-modelo"><i class="fa fa-check"></i><b>9.1.1</b> El modelo</a></li>
<li class="chapter" data-level="9.1.2" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#un-ejemplo-grafico"><i class="fa fa-check"></i><b>9.1.2</b> Un ejemplo gráfico</a></li>
<li class="chapter" data-level="9.1.3" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#limitaciones-del-algoritmo"><i class="fa fa-check"></i><b>9.1.3</b> Limitaciones del algoritmo</a></li>
<li class="chapter" data-level="9.1.4" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#ventajas-y-desventajas"><i class="fa fa-check"></i><b>9.1.4</b> Ventajas y desventajas</a></li>
<li class="chapter" data-level="9.1.5" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#implementacion-en-r"><i class="fa fa-check"></i><b>9.1.5</b> Implementación en R</a></li>
<li class="chapter" data-level="9.1.6" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#evaluacion"><i class="fa fa-check"></i><b>9.1.6</b> Evaluación</a></li>
<li class="chapter" data-level="9.1.7" data-path="k-medias-k-means.html"><a href="k-medias-k-means.html#determinar-el-numero-de-clusters-optimo"><i class="fa fa-check"></i><b>9.1.7</b> Determinar el número de clústers óptimo</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html"><i class="fa fa-check"></i><b>9.2</b> Hierarchical clustering</a><ul>
<li class="chapter" data-level="9.2.1" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#modelo"><i class="fa fa-check"></i><b>9.2.1</b> Modelo</a></li>
<li class="chapter" data-level="9.2.2" data-path="hierarchical-clustering.html"><a href="hierarchical-clustering.html#implementacion-en-r-1"><i class="fa fa-check"></i><b>9.2.2</b> Implementación en R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="aprendizaje-supervisado-1.html"><a href="aprendizaje-supervisado-1.html"><i class="fa fa-check"></i><b>10</b> Aprendizaje Supervisado</a><ul>
<li class="chapter" data-level="10.1" data-path="arboles-de-decision.html"><a href="arboles-de-decision.html"><i class="fa fa-check"></i><b>10.1</b> Árboles de decisión</a><ul>
<li class="chapter" data-level="10.1.1" data-path="arboles-de-decision.html"><a href="arboles-de-decision.html#en-r"><i class="fa fa-check"></i><b>10.1.1</b> En R</a></li>
<li class="chapter" data-level="10.1.2" data-path="arboles-de-decision.html"><a href="arboles-de-decision.html#ventajas-y-desventajas-1"><i class="fa fa-check"></i><b>10.1.2</b> Ventajas y desventajas</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="bagging-y-random-forest.html"><a href="bagging-y-random-forest.html"><i class="fa fa-check"></i><b>10.2</b> Bagging y Random Forest</a><ul>
<li class="chapter" data-level="10.2.1" data-path="bagging-y-random-forest.html"><a href="bagging-y-random-forest.html#en-r-1"><i class="fa fa-check"></i><b>10.2.1</b> En R</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="boosting.html"><a href="boosting.html"><i class="fa fa-check"></i><b>10.3</b> Boosting</a><ul>
<li class="chapter" data-level="10.3.1" data-path="boosting.html"><a href="boosting.html#optimizacion-de-parametros"><i class="fa fa-check"></i><b>10.3.1</b> Optimización de parámetros</a></li>
<li class="chapter" data-level="10.3.2" data-path="boosting.html"><a href="boosting.html#en-r-2"><i class="fa fa-check"></i><b>10.3.2</b> En R</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="explicacion-de-prediccion.html"><a href="explicacion-de-prediccion.html"><i class="fa fa-check"></i><b>10.4</b> Explicación de predicción</a><ul>
<li class="chapter" data-level="10.4.1" data-path="explicacion-de-prediccion.html"><a href="explicacion-de-prediccion.html#un-ejemplo-en-r"><i class="fa fa-check"></i><b>10.4.1</b> Un ejemplo en R</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>ANEXO</b></span></li>
<li class="chapter" data-level="A" data-path="sobre-in-training.html"><a href="sobre-in-training.html"><i class="fa fa-check"></i><b>A</b> Sobre in-training</a></li>
<li class="chapter" data-level="B" data-path="colaboradores.html"><a href="colaboradores.html"><i class="fa fa-check"></i><b>B</b> Colaboradores</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modelización en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="practica-en-r-3" class="section level2">
<h2><span class="header-section-number">7.6</span> Práctica en R</h2>
<p>Un ejemplo sencillo sobre el manejo de series temporales que puede realizarse con algunos paquetes de R.</p>
<blockquote>
<p>Datos</p>
</blockquote>
<p>Los datos utilizados corresponden a las <strong>ventas mensuales</strong> para una tienda de souvenirs en un balneario de Queensland, Australia, de enero de 1987 a diciembre de 1993 (Ver <a href="http://robjhyndman.com/tsdldata/data/fancy.dat">aquí</a>. Datos originales de Wheelwright y Hyndman, 1998).</p>
<div id="htmlwidget-c633aba4c69c4f1a9670" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-c633aba4c69c4f1a9670">{"x":{"hc_opts":{"title":{"text":"Monthly sales for a souvenir shop at a beach resort town in Queensland, Australia, for January 1987-December 1993","style":{"fontSize":"12px"}},"yAxis":{"title":{"text":null}},"credits":{"enabled":true,"text":"Elaborado por Innova-tsn","href":"https://www.innova-tsn.com"},"exporting":{"enabled":true},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"chart":{"type":"line","zoomType":"x"},"legend":{"enabled":true},"tooltip":{"valueDecimals":0,"shared":true,"crosshairs":true},"xAxis":{"type":"datetime","tickInterval":10,"labels":{"format":"{value:%m-%Y}","rotation":-90}},"series":[{"data":[[536457600000,7.41746628178892],[539136000000,7.78219431971372],[541555200000,7.95180929991046],[544233600000,8.17393921066467],[546825600000,8.23030014093807],[549504000000,8.22006396816164],[552096000000,8.37784146489105],[554774400000,8.17929513880233],[557452800000,8.52154769678127],[560044800000,8.76771530589945],[562723200000,8.93598247052666],[565315200000,9.89122315128614],[567993600000,7.82397000796815],[570672000000,8.55607538574002],[573177600000,8.88532188995553],[575856000000,8.47762665847418],[578448000000,8.68285677131405],[581126400000,8.5074135259989],[583718400000,8.72893114549063],[586396800000,8.46635242620086],[589075200000,8.61185406956077],[591667200000,8.67164668253439],[594345600000,9.44145844212576],[596937600000,10.2591221555078],[599616000000,8.45893252325831],[602294400000,8.64868275091755],[604713600000,9.20608934916864],[607392000000,8.57636357987714],[609984000000,8.77839216180762],[612662400000,8.79948073955071],[615254400000,8.90240389019008],[617932800000,9.00903414127095],[620611200000,9.05639283818004],[623203200000,9.1789013031408],[625881600000,9.62587725570802],[628473600000,10.4359086073296],[631152000000,8.68627752142817],[633830400000,8.66812383534513],[636249600000,9.42716399454557],[638928000000,8.75931864116395],[641520000000,8.9371028068499],[644198400000,8.88526791030584],[646790400000,9.0022356681753],[649468800000,8.98459970106459],[652147200000,8.99876218328263],[654739200000,9.04507650210367],[657417600000,9.79337465104933],[660009600000,10.3127590737202],[662688000000,8.48190585239446],[665366400000,8.77496693554935],[667785600000,9.17354878610287],[670464000000,9.08490979326442],[673056000000,9.07364626896591],[675734400000,9.23107197940138],[678326400000,9.33048062720624],[681004800000,9.43765282134659],[683683200000,9.36197846933872],[686275200000,9.51833156108381],[688953600000,9.99067895498687],[691545600000,10.7157655267851],[694224000000,8.93787920491441],[696902400000,9.19519526158966],[699408000000,9.58592342560243],[702086400000,9.35766753878483],[704678400000,9.14126463991353],[707356800000,9.4789993981795],[709948800000,9.72512494873588],[712627200000,9.89790248504199],[715305600000,10.083029416227],[717897600000,10.1421638438248],[720576000000,10.4919628691521],[723168000000,11.298762839144],[725846400000,9.2343732547976],[728524800000,9.32962272753498],[730944000000,9.99089568414157],[733622400000,9.76177017454231],[736214400000,9.68020586668178],[738892800000,9.8309991143828],[741484800000,10.1718013908294],[744163200000,10.2606905570263],[746841600000,10.3256593239152],[749433600000,10.3359622617392],[752112000000,10.7500933163369],[754704000000,11.5584786815873]],"name":"Ventas","color":"#004379","lineWidth":1}]},"theme":{"chart":{"backgroundColor":"transparent"}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
<blockquote>
<p>Librerías</p>
</blockquote>
<p>A lo largo de esta práctica se utilizan las siguientes librerías:</p>
<ul>
<li>XTS: <em>eXtensible Time Series</em> y</li>
<li>HIGHCHARTER: <em>a R wrapper for Highcharts javascript libray and its modules. </em>.</li>
</ul>
<p>Los manual de usuario de ambos paquetes esta disponibles en la siguientes enlaces: <a href="http://cran.r-project.org/web/packages/xts/xts.pdf">Manual de XTS</a> y <a href="https://cran.r-project.org/web/packages/highcharter/highcharter.pdf">Manual de HIGHCHARTER</a></p>
<p>Para instalar un paquete de R, se puede usar el comando: <code>install.packages("nombre del paquete")</code>. Por ejemplo, <code>install.packages("xts")</code>. De forma alternativa:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get xts</span>
<span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&quot;xts&quot;</span>)) {<span class="kw">install.packages</span>(<span class="st">&quot;xts&quot;</span>);    <span class="kw">library</span>(xts)}
<span class="co"># Get highcharter</span>
<span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&quot;highcharter&quot;</span>)) {<span class="kw">install.packages</span>(<span class="st">&quot;highcharter&quot;</span>);    <span class="kw">library</span>(highcharter)}
<span class="co"># Get tseries</span>
<span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&quot;tseries&quot;</span>)) {<span class="kw">install.packages</span>(<span class="st">&quot;tseries&quot;</span>);    <span class="kw">library</span>(tseries)}</code></pre>
<blockquote>
<p>Lectura y Visualización</p>
</blockquote>
<!-- Definimos la carpeta de trabajo y leemos el fichero de los datos con la función `read.zoo`. En este ejemplo, los datos están en el fichero `ClientesTotalesXTS.csv` que tiene formato `CSV`. Leer los datos de esta manera tiene como ventaja que las fechas son reconocidas como tal. Al usar una función como `read.csv` entienden las fechas como textos y no siempre son bien entendidas por las funciones que necesitan series temporales como input. -->
<p>Obtenemos los datos en el site de la <em>Time Series Data Library</em> (TSDL). (Los datos están <a href="http://robjhyndman.com/tsdldata/data/fancy.dat">aquí</a>.</p>
<pre class="sourceCode r"><code class="sourceCode r">datos =<span class="st"> </span><span class="kw">scan</span>(<span class="st">&quot;http://robjhyndman.com/tsdldata/data/fancy.dat&quot;</span>)
datos =<span class="st"> </span><span class="kw">log</span>(datos) <span class="co">#transformación opcional</span>

<span class="kw">head</span>(datos,<span class="dv">5</span>) <span class="co">#primeros 5 datos</span></code></pre>
<pre><code>FALSE [1] 7.41747 7.78219 7.95181 8.17394 8.23030</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(datos,<span class="dv">5</span>) <span class="co">#últimos 5 datos</span></code></pre>
<pre><code>FALSE [1] 10.2607 10.3257 10.3360 10.7501 11.5585</code></pre>
<blockquote>
<p>Objeto XTS</p>
</blockquote>
<p>La forma más conocida para la creación de un objeto de la clase serie temporal, es el uso de la función <code>ts</code>. En este ejemplo, creamos la serie temporal <code>sales.ts</code> a partir de <code>datos</code>.</p>
<p>Sin embargo, la manipulación de la serie es bastante más natural y amigable utilizando un objeto de la clase <code>xts</code>. En este ejemplo se crea el objeto <code>sales</code> a partir de <code>datos</code> y se hacen consultas básicas sobre su contenido (fechado, primer dato, últimas semanas, número de semanas en la muestra, etc.)</p>
<pre class="sourceCode r"><code class="sourceCode r">sales =<span class="st"> </span><span class="kw">as.xts</span>(sales.ts) <span class="co">#creación del objeto XTS</span>
<span class="kw">is.xts</span>(sales) <span class="co">#debe devolver TRUE</span></code></pre>
<pre><code>FALSE [1] TRUE</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">periodicity</span>(sales) <span class="co">#fechado de los datos</span></code></pre>
<pre><code>FALSE Monthly periodicity from ene. 1987 to dic. 1993</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">first</span>(sales) <span class="co">#primer dato</span></code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1987 7.41747</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">last</span>(sales) <span class="co">#último dato</span></code></pre>
<pre><code>FALSE              [,1]
FALSE dic. 1993 11.5585</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">first</span>(sales, <span class="st">&#39;7 months&#39;</span>) <span class="co">#primeros 7 dias</span></code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1987 7.41747
FALSE feb. 1987 7.78219
FALSE mar. 1987 7.95181
FALSE abr. 1987 8.17394
FALSE may. 1987 8.23030
FALSE jun. 1987 8.22006
FALSE jul. 1987 8.37784</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">last</span>(sales, <span class="st">&#39;2 quarters&#39;</span>) <span class="co">#últimas dos semanas</span></code></pre>
<pre><code>FALSE              [,1]
FALSE jul. 1993 10.1718
FALSE ago. 1993 10.2607
FALSE sep. 1993 10.3257
FALSE oct. 1993 10.3360
FALSE nov. 1993 10.7501
FALSE dic. 1993 11.5585</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nmonths</span>(sales) <span class="co">#número de meses en la muestra</span></code></pre>
<pre><code>FALSE [1] 84</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nquarters</span>(sales) <span class="co">#número de trimestres en la muestra</span></code></pre>
<pre><code>FALSE [1] 28</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nyears</span>(sales) <span class="co">#número de años en la muestra</span></code></pre>
<pre><code>FALSE [1] 7</code></pre>
<blockquote>
<p>Selección de datos usando las fechas</p>
</blockquote>
<p>Una funcionalidad interesante es la obtención de sub-muestras, utilizando la(s) fecha(s) como criterio(s) de selección.</p>
<pre class="sourceCode r"><code class="sourceCode r">sales[<span class="st">&#39;1990-01-01/1990-05-01&#39;</span>] <span class="co">#todos los datos del 01 al 05 de Febrero de 1990</span></code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1990 8.68628
FALSE feb. 1990 8.66812
FALSE mar. 1990 9.42716
FALSE abr. 1990 8.75932
FALSE may. 1990 8.93710</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">first</span>(sales[<span class="st">&#39;1991&#39;</span>], <span class="st">&#39;5 month&#39;</span>) <span class="co">#primeros 5 meses desde Febrero de 1989</span></code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1991 8.48191
FALSE feb. 1991 8.77497
FALSE mar. 1991 9.17355
FALSE abr. 1991 9.08491
FALSE may. 1991 9.07365</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">last</span>(sales[<span class="st">&#39;1990&#39;</span>], <span class="st">&#39;1 quarter&#39;</span>) <span class="co">#datos último mes de 1990</span></code></pre>
<pre><code>FALSE               [,1]
FALSE oct. 1990  9.04508
FALSE nov. 1990  9.79337
FALSE dic. 1990 10.31276</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rbind</span>(sales[<span class="st">&#39;1987-10/1988-03&#39;</span>],sales[<span class="st">&#39;1988-10/1989-03&#39;</span>]) <span class="co">#todos los datos del 01 al 05 de Febrero de 2011 y 2012</span></code></pre>
<pre><code>FALSE               [,1]
FALSE oct. 1987  8.76772
FALSE nov. 1987  8.93598
FALSE dic. 1987  9.89122
FALSE ene. 1988  7.82397
FALSE feb. 1988  8.55608
FALSE mar. 1988  8.88532
FALSE oct. 1988  8.67165
FALSE nov. 1988  9.44146
FALSE dic. 1988 10.25912
FALSE ene. 1989  8.45893
FALSE feb. 1989  8.64868
FALSE mar. 1989  9.20609</code></pre>
<blockquote>
<p>Cambios de Fechado</p>
</blockquote>
<p>El cambio de fechado o periodicidad es una operación muy útil durante el trabajo con series temporales. En este ejemplo, como la variable analizada corresponde a las ventas mensuales, se utiliza la función <code>sum</code> para obtener las ventas trimestrales y anuales.</p>
<pre class="sourceCode r"><code class="sourceCode r">sales.qua=<span class="kw">apply.quarterly</span>(sales, sum) <span class="co"># datos trimestrales</span>
 <span class="kw">first</span>(sales.qua, <span class="st">&#39;3 quarters&#39;</span>)</code></pre>
<pre><code>FALSE              [,1]
FALSE mar. 1987 23.1515
FALSE jun. 1987 24.6243
FALSE sep. 1987 25.0787</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">sales.yea=<span class="kw">apply.yearly</span>(sales, sum) <span class="co"># datos anuales</span>
 <span class="kw">first</span>(sales.yea, <span class="st">&#39;3 years&#39;</span>)</code></pre>
<pre><code>FALSE              [,1]
FALSE dic. 1987 100.449
FALSE dic. 1988 105.113
FALSE dic. 1989 108.676</code></pre>
<blockquote>
<p>Imputación de Datos Faltantes</p>
</blockquote>
<p>La falta de algunos datos y/o la presencia de datos errones suele tratarse con procedimientos de imputación - para no perder histórico de la muestra disponible. El paquete <code>xts</code> posee funciones que permiten extender hacia adelante o hacia atrás, valores observados en la misma serie temporal.</p>
<pre class="sourceCode r"><code class="sourceCode r">aux=sales[<span class="st">&#39;1990-01-01/1990-03-01&#39;</span>]
sales[<span class="st">&#39;1990-01-01/1990-03-01&#39;</span>]=<span class="ot">NA</span>
sales[<span class="st">&#39;1990-01-01/1990-03-01&#39;</span>]</code></pre>
<pre><code>FALSE           [,1]
FALSE ene. 1990   NA
FALSE feb. 1990   NA
FALSE mar. 1990   NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">(<span class="dt">isna=</span><span class="kw">which</span>(<span class="kw">is.na</span>(sales))) <span class="co">#identifica las líneas con NA</span></code></pre>
<pre><code>FALSE [1] 37 38 39</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">sales.na01=<span class="kw">na.locf</span>(sales) <span class="co">#repite el ultimo anterior a NA</span>
 sales.na01[isna,]</code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1990 10.4359
FALSE feb. 1990 10.4359
FALSE mar. 1990 10.4359</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">sales.na02=<span class="kw">na.locf</span>(sales, <span class="dt">fromLast=</span><span class="ot">TRUE</span>) <span class="co"># repite el primero despues de NA</span>
 sales.na02[isna,]</code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1990 8.75932
FALSE feb. 1990 8.75932
FALSE mar. 1990 8.75932</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">sales.na03=<span class="kw">na.locf</span>(sales, <span class="dt">na.rm=</span><span class="ot">TRUE</span>, <span class="dt">fromLast=</span><span class="ot">TRUE</span>)
 sales.na03[isna,]</code></pre>
<pre><code>FALSE              [,1]
FALSE ene. 1990 8.75932
FALSE feb. 1990 8.75932
FALSE mar. 1990 8.75932</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">sales[isna,]=aux</code></pre>
<blockquote>
<p>Estadísticos en diferentes fechados</p>
</blockquote>
<p>El paquete <code>xts</code>permite trabajar con series de estadísticos en fechado agregado. Por ejemplo, el máximo del mes, el mínimo del trimestre, etc. El ingrediente indispensable es el vector que indica los puntos de quiebre de la serie. Este vector se obtiene con la función <code>endpoints</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">aux.qq=<span class="kw">endpoints</span>(sales,<span class="st">&quot;quarters&quot;</span>) <span class="co">#indica los finales de trimestre</span>
<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="dt">cex.lab=</span><span class="fl">0.8</span>,<span class="dt">cex.axis=</span><span class="fl">0.8</span>,<span class="dt">las=</span><span class="dv">2</span>)
<span class="kw">plot</span>(<span class="kw">period.sum</span>(sales,aux.qq), <span class="dt">main=</span><span class="st">&quot;Total&quot;</span>) 
<span class="kw">plot</span>(<span class="kw">period.min</span>(sales,aux.qq), <span class="dt">main=</span><span class="st">&quot;Mínimo&quot;</span>)
<span class="kw">plot</span>(<span class="kw">period.max</span>(sales,aux.qq), <span class="dt">main=</span><span class="st">&quot;Máximo&quot;</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-27-1.png" width="864" /></p>
<pre class="sourceCode r"><code class="sourceCode r">aux.yy=<span class="kw">endpoints</span>(sales,<span class="st">&quot;years&quot;</span>) <span class="co">#indica los finales de año</span>
<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>),<span class="dt">cex.lab=</span><span class="fl">0.8</span>,<span class="dt">cex.axis=</span><span class="fl">0.8</span>,<span class="dt">las=</span><span class="dv">2</span>)
<span class="kw">plot</span>(<span class="kw">period.sum</span>(sales,aux.yy), <span class="dt">main=</span><span class="st">&quot;Total&quot;</span>)
<span class="kw">plot</span>(<span class="kw">period.min</span>(sales,aux.yy), <span class="dt">main=</span><span class="st">&quot;Mínimo&quot;</span>)
<span class="kw">plot</span>(<span class="kw">period.max</span>(sales,aux.yy), <span class="dt">main=</span><span class="st">&quot;Máximo&quot;</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-27-2.png" width="864" /></p>
<blockquote>
<p>División del conjunto de datos usando fechas</p>
</blockquote>
<p>Otra funcionalidad útil es <code>split</code>. Permite dividir el objeto original en sub-conjuntos, teniendo en cuenta un fechado y un horizonte. En este caso, se divide el objeto <code>sales</code> en sub-muestras de 4 meses cada una.</p>
<pre class="sourceCode r"><code class="sourceCode r">sales.by<span class="fl">.4</span>months=<span class="kw">split</span>(sales, <span class="dt">f=</span><span class="st">&quot;months&quot;</span>,<span class="dt">k=</span><span class="dv">4</span>) 
sales.by<span class="fl">.4</span>months</code></pre>
<pre><code>## [[1]]
##              [,1]
## ene. 1987 7.41747
## feb. 1987 7.78219
## mar. 1987 7.95181
## abr. 1987 8.17394
## 
## [[2]]
##              [,1]
## may. 1987 8.23030
## jun. 1987 8.22006
## jul. 1987 8.37784
## ago. 1987 8.17930
## 
## [[3]]
##              [,1]
## sep. 1987 8.52155
## oct. 1987 8.76772
## nov. 1987 8.93598
## dic. 1987 9.89122
## 
## [[4]]
##              [,1]
## ene. 1988 7.82397
## feb. 1988 8.55608
## mar. 1988 8.88532
## abr. 1988 8.47763
## 
## [[5]]
##              [,1]
## may. 1988 8.68286
## jun. 1988 8.50741
## jul. 1988 8.72893
## ago. 1988 8.46635
## 
## [[6]]
##               [,1]
## sep. 1988  8.61185
## oct. 1988  8.67165
## nov. 1988  9.44146
## dic. 1988 10.25912
## 
## [[7]]
##              [,1]
## ene. 1989 8.45893
## feb. 1989 8.64868
## mar. 1989 9.20609
## abr. 1989 8.57636
## 
## [[8]]
##              [,1]
## may. 1989 8.77839
## jun. 1989 8.79948
## jul. 1989 8.90240
## ago. 1989 9.00903
## 
## [[9]]
##               [,1]
## sep. 1989  9.05639
## oct. 1989  9.17890
## nov. 1989  9.62588
## dic. 1989 10.43591
## 
## [[10]]
##              [,1]
## ene. 1990 8.68628
## feb. 1990 8.66812
## mar. 1990 9.42716
## abr. 1990 8.75932
## 
## [[11]]
##              [,1]
## may. 1990 8.93710
## jun. 1990 8.88527
## jul. 1990 9.00224
## ago. 1990 8.98460
## 
## [[12]]
##               [,1]
## sep. 1990  8.99876
## oct. 1990  9.04508
## nov. 1990  9.79337
## dic. 1990 10.31276
## 
## [[13]]
##              [,1]
## ene. 1991 8.48191
## feb. 1991 8.77497
## mar. 1991 9.17355
## abr. 1991 9.08491
## 
## [[14]]
##              [,1]
## may. 1991 9.07365
## jun. 1991 9.23107
## jul. 1991 9.33048
## ago. 1991 9.43765
## 
## [[15]]
##               [,1]
## sep. 1991  9.36198
## oct. 1991  9.51833
## nov. 1991  9.99068
## dic. 1991 10.71577
## 
## [[16]]
##              [,1]
## ene. 1992 8.93788
## feb. 1992 9.19520
## mar. 1992 9.58592
## abr. 1992 9.35767
## 
## [[17]]
##              [,1]
## may. 1992 9.14126
## jun. 1992 9.47900
## jul. 1992 9.72512
## ago. 1992 9.89790
## 
## [[18]]
##              [,1]
## sep. 1992 10.0830
## oct. 1992 10.1422
## nov. 1992 10.4920
## dic. 1992 11.2988
## 
## [[19]]
##              [,1]
## ene. 1993 9.23437
## feb. 1993 9.32962
## mar. 1993 9.99090
## abr. 1993 9.76177
## 
## [[20]]
##               [,1]
## may. 1993  9.68021
## jun. 1993  9.83100
## jul. 1993 10.17180
## ago. 1993 10.26069
## 
## [[21]]
##              [,1]
## sep. 1993 10.3257
## oct. 1993 10.3360
## nov. 1993 10.7501
## dic. 1993 11.5585</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"> <span class="co">#divide el conjunto de datos en partes de 4 meses cada una</span>
<span class="kw">summary</span>(sales.by<span class="fl">.4</span>months) <span class="co">#indica el número de elemento que hay en cada parte</span></code></pre>
<pre><code>##       Length Class Mode   
##  [1,] 4      xts   numeric
##  [2,] 4      xts   numeric
##  [3,] 4      xts   numeric
##  [4,] 4      xts   numeric
##  [5,] 4      xts   numeric
##  [6,] 4      xts   numeric
##  [7,] 4      xts   numeric
##  [8,] 4      xts   numeric
##  [9,] 4      xts   numeric
## [10,] 4      xts   numeric
## [11,] 4      xts   numeric
## [12,] 4      xts   numeric
## [13,] 4      xts   numeric
## [14,] 4      xts   numeric
## [15,] 4      xts   numeric
## [16,] 4      xts   numeric
## [17,] 4      xts   numeric
## [18,] 4      xts   numeric
## [19,] 4      xts   numeric
## [20,] 4      xts   numeric
## [21,] 4      xts   numeric</code></pre>
<blockquote>
<p>Otras operaciones con los datos</p>
</blockquote>
<p>Finalmente, se presenta un ejemplo de una serie obtenida a partir del uso de operaciones básicas de R como <code>diff</code> y <code>log</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">sales.inc &lt;-<span class="st"> </span><span class="kw">diff</span>(<span class="kw">log</span>(sales), <span class="dt">lag =</span> <span class="dv">1</span>) <span class="co">#Tasa de incremento mensual</span>
sales.inc &lt;-<span class="st"> </span>sales.inc[<span class="op">-</span><span class="dv">1</span>] <span class="co">#Eliminamos el primer dato por ser NA</span>
<span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="dt">cex.lab=</span><span class="fl">0.8</span>,<span class="dt">cex.axis=</span><span class="fl">0.8</span>,<span class="dt">las=</span><span class="dv">2</span>)
<span class="kw">plot</span>(sales.inc, <span class="dt">main =</span> <span class="st">&quot;Nuevas Ventas&quot;</span>,
     <span class="dt">col =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">xlab =</span> <span class="st">&quot;Date&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Variación&quot;, major.ticks=&#39;years&#39;,</span>
<span class="st">     minor.ticks=FALSE)</span></code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-29-1.png" width="864" /></p>
<blockquote>
<p>Gráficos con xts</p>
</blockquote>
<p>Los gráficos de objetos <code>xts</code> son bastante más visuales o legibles que los objetos <code>ts</code>. La principal diferencia está en el reconocimiento de las fechas y su visualización en el eje horizontal.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>),<span class="dt">cex.lab=</span><span class="fl">0.8</span>,<span class="dt">cex.axis=</span><span class="fl">0.8</span>,<span class="dt">las=</span><span class="dv">2</span>)
<span class="kw">plot</span>(sales, <span class="dt">main =</span> <span class="st">&quot;Ventas Mensuales&quot;</span>,
     <span class="dt">col =</span> innCol[<span class="dv">1</span>],<span class="dt">xlab =</span> <span class="st">&quot;Date&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Ventas&quot;</span>, <span class="dt">major.ticks=</span><span class="st">&#39;quarters&#39;</span>,
     <span class="dt">minor.ticks=</span><span class="ot">FALSE</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-30-1.png" width="864" /></p>
<blockquote>
<p>Gráficos con highcharter</p>
</blockquote>
<p>Los gráficos generados con <a href="http://jkunst.com/highcharter/index.html">highcharter</a> utilizan la biblioteca <a href="http://www.highcharts.com/demo">Highcharts</a></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">highchart</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">hc_chart</span>(<span class="dt">type=</span><span class="st">&quot;line&quot;</span>,<span class="dt">zoomType=</span><span class="st">&quot;x&quot;</span>)<span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_title</span>(<span class="dt">text =</span> <span class="st">&quot;Ventas Mensuales&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_subtitle</span>(<span class="dt">text =</span> <span class="st">&quot;Gráfico Tipo Línea&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">hc_legend</span>(<span class="dt">enabled =</span> T) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_tooltip</span>(<span class="dt">valueDecimals=</span> <span class="dv">2</span>,<span class="dt">shared=</span>T, <span class="dt">crosshairs=</span>T) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_xAxis</span>(<span class="dt">type =</span> <span class="st">&#39;datetime&#39;</span>,
           <span class="dt">tickInterval=</span><span class="dv">10</span>,
           <span class="dt">labels =</span> <span class="kw">list</span>(<span class="dt">format =</span> <span class="st">&#39;{value:%m-%Y}&#39;</span>,<span class="dt">rotation=</span><span class="op">-</span><span class="dv">90</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">hc_add_series</span>(<span class="dt">data=</span>sales.ts, 
                <span class="dt">name =</span> <span class="st">&quot;Ventas&quot;</span>,
                <span class="dt">color =</span> innCol[<span class="dv">1</span>],
                <span class="dt">lineWidth=</span> <span class="dv">1</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_credits</span>(<span class="dt">enabled =</span> <span class="ot">TRUE</span>, <span class="co"># add credits</span>
             <span class="dt">text =</span> <span class="st">&quot;Elaborado por Innova-tsn&quot;</span>,
             <span class="dt">href =</span> <span class="st">&quot;https://www.innova-tsn.com&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">hc_exporting</span>(<span class="dt">enabled =</span> <span class="ot">TRUE</span>)</code></pre>
<div id="htmlwidget-e04508283bd7dda0fd35" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-e04508283bd7dda0fd35">{"x":{"hc_opts":{"title":{"text":"Ventas Mensuales"},"yAxis":{"title":{"text":null}},"credits":{"enabled":true,"text":"Elaborado por Innova-tsn","href":"https://www.innova-tsn.com"},"exporting":{"enabled":true},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"chart":{"type":"line","zoomType":"x"},"subtitle":{"text":"Gráfico Tipo Línea"},"legend":{"enabled":true},"tooltip":{"valueDecimals":2,"shared":true,"crosshairs":true},"xAxis":{"type":"datetime","tickInterval":10,"labels":{"format":"{value:%m-%Y}","rotation":-90}},"series":[{"data":[[536457600000,7.41746628178892],[539136000000,7.78219431971372],[541555200000,7.95180929991046],[544233600000,8.17393921066467],[546825600000,8.23030014093807],[549504000000,8.22006396816164],[552096000000,8.37784146489105],[554774400000,8.17929513880233],[557452800000,8.52154769678127],[560044800000,8.76771530589945],[562723200000,8.93598247052666],[565315200000,9.89122315128614],[567993600000,7.82397000796815],[570672000000,8.55607538574002],[573177600000,8.88532188995553],[575856000000,8.47762665847418],[578448000000,8.68285677131405],[581126400000,8.5074135259989],[583718400000,8.72893114549063],[586396800000,8.46635242620086],[589075200000,8.61185406956077],[591667200000,8.67164668253439],[594345600000,9.44145844212576],[596937600000,10.2591221555078],[599616000000,8.45893252325831],[602294400000,8.64868275091755],[604713600000,9.20608934916864],[607392000000,8.57636357987714],[609984000000,8.77839216180762],[612662400000,8.79948073955071],[615254400000,8.90240389019008],[617932800000,9.00903414127095],[620611200000,9.05639283818004],[623203200000,9.1789013031408],[625881600000,9.62587725570802],[628473600000,10.4359086073296],[631152000000,8.68627752142817],[633830400000,8.66812383534513],[636249600000,9.42716399454557],[638928000000,8.75931864116395],[641520000000,8.9371028068499],[644198400000,8.88526791030584],[646790400000,9.0022356681753],[649468800000,8.98459970106459],[652147200000,8.99876218328263],[654739200000,9.04507650210367],[657417600000,9.79337465104933],[660009600000,10.3127590737202],[662688000000,8.48190585239446],[665366400000,8.77496693554935],[667785600000,9.17354878610287],[670464000000,9.08490979326442],[673056000000,9.07364626896591],[675734400000,9.23107197940138],[678326400000,9.33048062720624],[681004800000,9.43765282134659],[683683200000,9.36197846933872],[686275200000,9.51833156108381],[688953600000,9.99067895498687],[691545600000,10.7157655267851],[694224000000,8.93787920491441],[696902400000,9.19519526158966],[699408000000,9.58592342560243],[702086400000,9.35766753878483],[704678400000,9.14126463991353],[707356800000,9.4789993981795],[709948800000,9.72512494873588],[712627200000,9.89790248504199],[715305600000,10.083029416227],[717897600000,10.1421638438248],[720576000000,10.4919628691521],[723168000000,11.298762839144],[725846400000,9.2343732547976],[728524800000,9.32962272753498],[730944000000,9.99089568414157],[733622400000,9.76177017454231],[736214400000,9.68020586668178],[738892800000,9.8309991143828],[741484800000,10.1718013908294],[744163200000,10.2606905570263],[746841600000,10.3256593239152],[749433600000,10.3359622617392],[752112000000,10.7500933163369],[754704000000,11.5584786815873]],"name":"Ventas","color":"#004379","lineWidth":1}]},"theme":{"chart":{"backgroundColor":"transparent"}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
<p><br></p>
<pre class="sourceCode r"><code class="sourceCode r">hc &lt;-<span class="st"> </span><span class="kw">highchart</span>(<span class="dt">type=</span><span class="st">&quot;stock&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_title</span>(<span class="dt">text =</span> <span class="st">&quot;Ventas Mensuales&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_subtitle</span>(<span class="dt">text =</span> <span class="st">&quot;Gráfico tipo Stock&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">hc_legend</span>(<span class="dt">enabled =</span> T) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_tooltip</span>(<span class="dt">valueDecimals=</span> <span class="dv">0</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_add_series</span>(<span class="dt">data=</span>sales.ts, 
                <span class="dt">name =</span> <span class="st">&quot;Ventas&quot;</span>,
                <span class="dt">color =</span> innCol[<span class="dv">1</span>]) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">hc_credits</span>(<span class="dt">enabled =</span> <span class="ot">TRUE</span>, <span class="co"># add credits</span>
             <span class="dt">text =</span> <span class="st">&quot;Elaborado por Innova-tsn&quot;</span>,
             <span class="dt">href =</span> <span class="st">&quot;https://www.innova-tsn.com&quot;</span>)
hc</code></pre>
<div id="htmlwidget-7d556a466b30f5171030" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-7d556a466b30f5171030">{"x":{"hc_opts":{"title":{"text":"Ventas Mensuales"},"yAxis":{"title":{"text":null}},"credits":{"enabled":true,"text":"Elaborado por Innova-tsn","href":"https://www.innova-tsn.com"},"exporting":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"subtitle":{"text":"Gráfico tipo Stock"},"legend":{"enabled":true},"tooltip":{"valueDecimals":0},"series":[{"data":[[536457600000,7.41746628178892],[539136000000,7.78219431971372],[541555200000,7.95180929991046],[544233600000,8.17393921066467],[546825600000,8.23030014093807],[549504000000,8.22006396816164],[552096000000,8.37784146489105],[554774400000,8.17929513880233],[557452800000,8.52154769678127],[560044800000,8.76771530589945],[562723200000,8.93598247052666],[565315200000,9.89122315128614],[567993600000,7.82397000796815],[570672000000,8.55607538574002],[573177600000,8.88532188995553],[575856000000,8.47762665847418],[578448000000,8.68285677131405],[581126400000,8.5074135259989],[583718400000,8.72893114549063],[586396800000,8.46635242620086],[589075200000,8.61185406956077],[591667200000,8.67164668253439],[594345600000,9.44145844212576],[596937600000,10.2591221555078],[599616000000,8.45893252325831],[602294400000,8.64868275091755],[604713600000,9.20608934916864],[607392000000,8.57636357987714],[609984000000,8.77839216180762],[612662400000,8.79948073955071],[615254400000,8.90240389019008],[617932800000,9.00903414127095],[620611200000,9.05639283818004],[623203200000,9.1789013031408],[625881600000,9.62587725570802],[628473600000,10.4359086073296],[631152000000,8.68627752142817],[633830400000,8.66812383534513],[636249600000,9.42716399454557],[638928000000,8.75931864116395],[641520000000,8.9371028068499],[644198400000,8.88526791030584],[646790400000,9.0022356681753],[649468800000,8.98459970106459],[652147200000,8.99876218328263],[654739200000,9.04507650210367],[657417600000,9.79337465104933],[660009600000,10.3127590737202],[662688000000,8.48190585239446],[665366400000,8.77496693554935],[667785600000,9.17354878610287],[670464000000,9.08490979326442],[673056000000,9.07364626896591],[675734400000,9.23107197940138],[678326400000,9.33048062720624],[681004800000,9.43765282134659],[683683200000,9.36197846933872],[686275200000,9.51833156108381],[688953600000,9.99067895498687],[691545600000,10.7157655267851],[694224000000,8.93787920491441],[696902400000,9.19519526158966],[699408000000,9.58592342560243],[702086400000,9.35766753878483],[704678400000,9.14126463991353],[707356800000,9.4789993981795],[709948800000,9.72512494873588],[712627200000,9.89790248504199],[715305600000,10.083029416227],[717897600000,10.1421638438248],[720576000000,10.4919628691521],[723168000000,11.298762839144],[725846400000,9.2343732547976],[728524800000,9.32962272753498],[730944000000,9.99089568414157],[733622400000,9.76177017454231],[736214400000,9.68020586668178],[738892800000,9.8309991143828],[741484800000,10.1718013908294],[744163200000,10.2606905570263],[746841600000,10.3256593239152],[749433600000,10.3359622617392],[752112000000,10.7500933163369],[754704000000,11.5584786815873]],"name":"Ventas","color":"#004379"}]},"theme":{"chart":{"backgroundColor":"transparent"}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"stock","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
<blockquote>
<p>Tendencia (anual)</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(sales.ts,<span class="dt">main=</span><span class="st">&quot;Venta&quot;</span>, <span class="dt">type=</span><span class="st">&quot;l&quot;</span>)
<span class="kw">abline</span>(<span class="kw">lm</span>(sales.ts <span class="op">~</span><span class="st"> </span><span class="kw">time</span>(sales.ts)),<span class="dt">col=</span><span class="st">&quot;#9d9fa0&quot;</span>,<span class="dt">lty=</span><span class="dv">3</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<blockquote>
<p>Tendencia (anual)</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">aggregate</span>(sales.ts,<span class="dt">FUN=</span>mean),<span class="dt">main=</span><span class="st">&quot;Venta media por Año&quot;</span>, <span class="dt">type=</span><span class="st">&quot;h&quot;</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<blockquote>
<p>Estacionalidad</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(sales.ts<span class="op">~</span><span class="kw">cycle</span>(sales.ts), <span class="dt">main=</span><span class="st">&quot;Ventas por Mes&quot;</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<blockquote>
<p>Variacion anual (diferencia)</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r">sales.ts.diff =<span class="st"> </span><span class="kw">diff</span>(sales.ts, <span class="dt">differences =</span> <span class="dv">12</span>)
<span class="kw">plot</span>(sales.ts.diff)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<blockquote>
<p>Test de Estacionariedad</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">adf.test</span>(<span class="kw">diff</span>(sales.ts,<span class="dv">12</span>), <span class="dt">alternative=</span><span class="st">&quot;stationary&quot;</span>, <span class="dt">k=</span><span class="dv">0</span>)</code></pre>
<pre><code>Augmented Dickey-Fuller Test</code></pre>
<p>data: diff(sales.ts, 12)
Dickey-Fuller = -4.705, Lag order = 0, p-value = 0.01
alternative hypothesis: stationary</p>
<blockquote>
<p>ACF</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">acf</span>(sales.ts.diff)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-38-1.png" width="672" /></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pacf</span>(sales.ts.diff)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-38-2.png" width="672" /></p>
<blockquote>
<p>Ajuste Modelo ARIMA</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r">(fit &lt;-<span class="st"> </span><span class="kw">arima</span>(sales.ts, <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>),<span class="dt">seasonal =</span> <span class="kw">list</span>(<span class="dt">order =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">period =</span> <span class="dv">12</span>)))</code></pre>
<p>Call:
arima(x = sales.ts, order = c(1, 1, 0), seasonal = list(order = c(0, 1, 1),
period = 12))</p>
<p>Coefficients:
ar1 sma1
-0.502 -0.511
s.e. 0.101 0.154</p>
<p>sigma^2 estimated as 0.0311: log likelihood = 20.49, aic = -34.99</p>
<blockquote>
<p>Previsión</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r">pred &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, <span class="dt">n.ahead =</span> <span class="dv">5</span><span class="op">*</span><span class="dv">12</span>)
<span class="kw">ts.plot</span>(sales.ts,pred<span class="op">$</span>pred, <span class="dt">log =</span> <span class="st">&quot;y&quot;</span>, <span class="dt">lty =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="dt">main=</span><span class="st">&quot;Previsión 5 años&quot;</span>)</code></pre>
<p><img src="05-SeriesTemporales_files/figure-html/unnamed-chunk-40-1.png" width="672" /></p>
<div id="ver-tambien-1" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Ver también</h3>
<ul>
<li><p><a href="http://a-little-book-of-r-for-time-series.readthedocs.io/en/latest/src/timeseries.html#selecting-a-candidate-arima-model">Using R for Time Series Analysis</a></p></li>
<li><p><a href="https://rpubs.com/ryankelly/ts6">TSA: Start to Finish Examples</a></p></li>
<li><p><a href="https://www.analyticsvidhya.com/blog/2015/12/complete-tutorial-time-series-modeling/">A Complete Tutorial on Time Series Modeling in R</a></p></li>
<li><p><a href="http://www.business-science.io/code-tools/2017/10/23/demo_week_tidyquant.html">Business Science Demo Week</a></p></li>
<li><p><a href="http://www.business-science.io/code-tools/2017/05/02/timekit-0-2-0.html">TimeKit: Time Series Forecast Applications Using Data Mining</a></p></li>
<li><p><a href="https://datamarket.com/data/list/?q=provider:tsdl">Time Series Data Library</a></p></li>
</ul>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="funciones-de-transferencia.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="a-manera-de-nota-final.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="assets/gitbook-2.6.7/js/lunr.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
